# OPPO 终极适配方案 1.2

## 适配尺寸划分

- **横向屏幕**（ **Landscape**，缩写 `ls`，以下简称**横屏** ）
  - `2k` 屏（ 宽度大于 `1920px`，缩写 `p2` ）
  - `1k` 屏（ 宽度在 `1025px ~ 1920px`，缩写 `p1` ）
  - `平板` （ 宽度小于 `1025px`，缩写 `padl` ）
- **竖向屏幕**（ **Portrait**，缩写 `pt`，以下简称**竖屏** ）
  - `手机` （ 宽度小于 `569px`，缩写 `mb` ）
  - `平板` （ 宽度小于 `1025px`，缩写 `pad` ）

## HTML

- 自然排列的模块根据宽度采用不同的样式， Sticky 模块（或需要全屏展示的）根据横竖屏采用不同版本的设计和动效以及样式。
- 添加对应的类名控制元素在不同版本下的显示与否
  - `.ls-hidden` 元素在**横屏**下不显示
  - `.pt-hidden` 元素在**竖屏**下不显示
  - `...` 其余尺寸可根据需要扩展

## CSS

- **自然排列模块**
  - **横屏**
    - 根据设计稿（1920版本）完成样式。图片尺寸、元素间距可直接按照设计稿填写具体数值并使用 rpx 作为单位，使用 rpx 作为单位的样式会在其他尺寸自动根据比例进行计算。
  - **竖屏**
    - 根据设计稿（360版本）完成样式。rpx 数值需在 `@media pt` 选择器下使用，其余说明同上。
- **Sticky 模块（全屏模块）**
  - **横屏**
    - 根据设计稿（1920版本）完成样式。rpx 的使用方法同上。如果是全屏展示的模块，可使用 vw/vh 为统一单位。
  - **竖屏**
    - 根据设计稿（360版本）完成样式。rpx 的使用方法同上。如果是全屏展示的模块，可使用 vh 为统一单位。

## JS

- **横屏**
  - 动效采用 `PC` 设计
- **竖屏**
  - 动效采用 `移动端` 设计
- 使用 `isPortrait()` 获取屏幕类型
  - `false` **横屏**
  - `true` **竖屏**
- 使用 `getMedia()` 获取屏幕尺寸
  - `p2` 大于 `1920px`
  - `p1` = `1025px ~ 1920px`
  - `pad` = `569px ~ 1024px`
  - `mb` 小于 `569px`

## 图片懒加载

- 例:

  ```
  img(@src="~@@/images/xxx/xxx.jpg")

## 视频处理

移动端统一为弹窗播放或者静态图片，视频优先级极高的采用序列帧

- 弹窗播放
  - 项目模板中有公共弹窗元素`.g--popup`, 打开弹窗会根据传入的参数播放不同的视频，关闭时会移除视频
    - **手动调用**：`video-utils.js` 中提供了 `popupPlayer`方法，按需调用 （具体参数见 /src/common/js/video-util.js）
    - **自动启用**：给元素加上`.g--popup-user`类，并给元素设置相应`attribute`即可自动启用（会自动找到带有`.g--popup-user`类去调用`popupPlayer`方法，`attribute`设置见 /src/components/video/popup/index.js）
